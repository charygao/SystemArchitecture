## 4.1 网络架构与协议

网络架构是指计算机网络的各层及其协议的集合

协议是指用于规定信息的格式及如何发送和接收信息的一套规则

### 4.1.1网络互联模型

OSI/RM 七层：物理层、数据链路层、网络层、传输层、会话层、表示层、应用层

**1.各层的功能**

物理层：透明地完成相邻节点之间原始比特流的传输

数据链路层：负责在两个相邻节点之间的线路上无差错地传送以帧为单位的数据

网络层：是通信子网的最高层。负责在数据链路层服务的基础上，实现整个通信子网内的连接，并通过网络连接交换网络服务数据单元

传输层：负责数据通信的最高层，是面向网络通信的低三层（物理层、数据链路层和网络层）和面向信息处理的高三层（会话层、表示层和应用层）之间的中间层，是资源子网和通信子网的桥梁，主要任务是为两台计算机的通信提供可靠的端到端的数据传输服务。

会话层：利用传输层提供的端到端数据传输服务，具体实施服务请求者与服务提供者之间的通信、组织和同步它们的会话活动，并管理它们的数据交换过程。

表示层：处理的是用户信息的表示问题。

应用层：直接面向用户的一层，是计算机网络与最终用户之间的界面

**2.TCP/IP结构模型**

网络接口层：对应七层中的数据链路层和物理层，只定义了网络接口层作为物理层的接口规范。处在最底层，主要负责为物理网络准备数据所需的全部服务程序和功能。

网络互联层，也称网络层，负责将数据报独立地从信源传送到信宿，主要解决路由选择、阻塞控制和网络互联等问题，在功能上类似七层中的网络层。

传输层：负责在信源和信宿之间提供端到端的数据传输服务，相当于七层中的传输层

应用层：直接面向用户应用，魏永福方便的提供对各种网络资源的访问服务，包含了七层中的会话层和表示层中的部分功能

### 4.1.2 常见的网络协议

#### 1.应用层协议

**FTP**：文件传输协议，是网络上两台计算机传送文件的协议，运行在TCP上，传输模式包括Bin（二进制）和ASII（文本文件）两种，除了文本文件之外，都应该使用二进制模式传输。在客户机和服务器之间建立两条TCP连接，一条用于传送控制信息（使用21号端口），另一条用于传送文件内容（使用20端口）。

**TFTP**：简单文本传输协议，提供不复杂、开销不大的文件传输服务。建立在TDP上，提供不可靠的数据流传输服务，不提供存取授权与认证机制，使用超时重传的方式来保证数据的到达

**HTTP**：超文本传输协议，是用于从www服务器传输超文本到本地浏览器的传送协议。可以使浏览器更加高效，使网络传输减少。建立在TCP上，不仅保证计算机正确快速地传输超文本文档，还确定稳当的哪一部分，哪部分内容首先显示等。

**SMTP**：简单邮件传输协议，建立在TCP上，是一种提供可靠且有效的电子邮件传输的协议。是建模在FTP文件传输服务上的一种邮件服务，主要用于传输系统之间的邮件信息，并提供与电子邮件有关的通知。

**DHCP**：动态主机配置协议，建立在UDP上，是基于客户机/服务器模型设计的。所有的IP网络设定数据都由DHCP服务器集中管理，并负责处理客户端的DHCP要求；而客户端则会使用从服务器分配下来的IP环境数据。DHCP通过租约的概念，有效且动态地分配客户端的TCP/IP设定。分配IP地址有三种方式：固定分配，动态分配，自动分配

**Telnet**：远程登录协议，是登录和仿真程序，建立在TCP上，基本功能是允许用户登录进入远程计算机系统。

**DNS**：域名系统，是进行域名解析的服务器

**SNMP**：简单网络管理协议，是指一系列网络管理规范的集合，包括协议本身、数据结构的定义和一些相关概念

#### 2. 传输层协议

**TCP**：在IP协议提供的不可靠数据服务的基础上，采用了重发技术，为应用程序提供了一个可靠的、面向连接的、全双工的数据传输服务。一般用于传输数据量比较少，且对可靠性要求高的场合。

**UDP**：是一种不可靠的、无连接的协议，可以保证应用程序进程间的通信，与TCP相比，是一种无连接的协议，错误检测功能要弱得多。一般用于传输量大，对可靠性要求不是很高，但要求速度快的场合

#### 3.网络层协议

**IP**：提供的服务通常被认为是无连接的和不可靠的，将差错检测和流量控制之类的服务授权给了其他的各层协议，这正是TCP/IP能够高效率工作的一个重要保证。

**ARP**：地址解析协议，用于动态地完成IP地址向物理地址（MAC地址）的转换。

**ICMP**：网际控制报文协议，用于发送差错报文的协议，功能在于尽量避免差错，并在发生差错时报告的机制

**IGMP**：网际组管理协议，是计算机用作向相邻多目路由器报告多目组成员的协议。

### 4.1.3 IPv6

为了应对IPv4的缺点，地址空间耗尽，路由表急剧膨胀，缺乏对QoS的支持，本身不提供任何安全机制，移动性能差等问题

#### 1.IPv6 地址表示

一个32位的IPv4地址以8个位为一段分为4段，每段之间用“.”分开。而IPv6地址的128位是以16位为一段，共分为8段，每段的16位转换为一个4位的16进制数字，每段之间用冒号“：”分开。

有三种格式来表示，首选格式是最长的表示方法，由所有的32个16进制字符组成。

先由128位2进制字符，16位一段分割，每段4位得到一个16进制字符，然后冒号隔开，得到

2001：0da8：d001：0001：0000：0000：0000：0001

#### 2.压缩地址表示

每段地址中去除前导0，连续2段以上为0的字段使用“：：”来表示

2001：da8：d001：1：：1

#### 3.内嵌IPv4地址的IPv6地址

第一部分使用十六进制表示，而IPv4部分使用十进制，如：fe80：：200:5efe： 58.20.27.60

#### 4.IPv6地址类型

1.单播IPv6地址：唯一标识一个IPv6节点的接口

2.多播IPv6地址：标识一组IPv6节点的接口

3.泛播IPv6地址：指派给多个节点的接口

#### 5.IPv6的优势

1.具有更大的地址空间

2.使用更小的路由表。

3.增加了增强的组播支持和对流支持，使网络上的多媒体应用有了长足发展的机会，为服务质量控制提供了良好的网络平台。

4.加入了对自动配置的支持。

5.更高的安全性

#### 6.IPv4到IPv6的过渡技术

1.双协议栈技术。2.隧道技术。3.NAT-PT技术

## 4.2 局域网与广域网

### 4.2.1局域网基础知识

特点：

1.地理分布范围较小。一般为数百米至数千米的区域范围内

2.数据传输速率高。1000mbps，可适用于语音、图像、视频等各种业务数据信息的高速交换

3.数据误码率低。采用短距离基带传输，使用高质量的传输媒体，从而提高数据传输质量

4.一般以PC为主体，还包括终端和各种外设

5.协议相对简单、接口灵活，建网成本低、周期短，便于管理和扩充

构成局域网的网络拓扑结构主要由星型结构、总线结构、环形结构和网状结构

### 4.2.2 无线局域网

WLAN主要运用射频技术取代原来局域网系统中必不可少的传输介质来完成数据的 传送任务

#### 1.拓扑结构

无线局域网分为两大类，分别是有接入点模式（基础设施网络）和无接入点模式（Adhoc网络）

1.基础设施网络，系统存在接入点，通过接入点（AP）将一组节点逻辑上联系在一起，形成一个局域网

2.Adhoc网络，直接通过无线网卡实现点对点连接，与基础设施相比，Adhoc中没有AP这样的设备，可扩展性和灵活性更好，但路由和协调控制等技术都难以解决

#### 2.IEEE 802.11标准

IEEE802委员会为无线局域网开发的一组标准。其中定义了媒体访问控制层（MAC层）和物理层。

#### 3.3G通信技术

3G是第三代移动通信及其技术的简称，主流标准包括：WCDMA、CDMA 2000 和TD-SCDMA

WCDMA：宽频，可假设在GSM网络上。支持者为欧洲厂商，日本公司，中国联通

CDMA 2000：窄频，建设成本低。支持者日本、韩国、北美，中国电信

TD-SCDMA：将智能天线、同步CDMA和软件无线电等技术融入，在频谱利用率、对业务支持具有灵活性、频率灵活性及成本等有优势。全球一半以上的设备厂商都支持，中国移动

#### 4.4G通信技术

4G是第四代移动通信及其技术的简称。标准有两大方向，LTE和WIMAX

TD-LTE：时分双工长期演进

FDD-LTE：频分双工长期演进，比TD-LTE领先，是当前世界上采用的国家及地区最广泛的终端种类最丰富的的一种4G标准。

WiMAX：全球微波互联接入，也称IEEE 802.16，优点：避开干扰，带宽调整能力，覆盖面积大；缺点：移动性不足

### 4.2.3 广域网技术

主要提供面向通信的服务，支持用户使用计算机进行远距离的信息交换，与局域网相比，覆盖范围广，通信的距离远。

### 4.2.4网络接入技术

#### PSTN接入

公用交换电话网络。利用电话线拨号接入Internet。速度较低，低于64kbps

#### ISDN接入

综合业务数字网。俗称一线通，是在电话网络的基础上构造的纯数字方式的综合业务数字网。基本速率接口为2B+D信道，共144kbps带宽，一般使用RJ45接口

#### ADSL接入

非对称数字用户线路。服务端设备和用户端设备之间通过普通的电话线连接，无须对入户线缆进行改造，就可以为现有的大量电话用户提供ADSL宽带接入。标准和技术的成熟以及成本的不断降低，成为接入主要方式之一。特点是下行速度大于上行速度。

#### FTTx+LAN接入

光纤通信。优点：传输频带宽，通信容量大；传输损耗小；抗电磁干扰能力强；线径细，重量轻；资源丰富

#### HFC接入

同轴光纤技术。将光缆敷设到小区，然后通过观点转换节点，利用有线电视（CATV）的总线式同轴电缆连接到用户，提供综合电信业务的技术。充分利用CATV原有的网络，建网快、造价低等贴点。

## 4.3网络互连与常用设备

网络互联是为了将两个以上具有独立自治能力、同构或异构的计算机网络连接起来，实现数据流通，扩大资源共享的范围，或者容乃更多的用户。

### 1.网络互联设备

在网络互连时，各节点需要通过一个中间设备来实现。

中继器：实现物理层协议转换，在电缆间转换二进制信号

网桥：实现物理层和数据链路层协议转换

路由器：实现网络层和以下各层协议转换

网关：提供从最底层到传输层或以上各层的协议转换

交换机

### 2.交换技术

在计算机网络中，当用户较多而传输的距离较远时，通常采用交换技术，使通信传输线路为各个用户公用，以提高传输设备的利用率，降低系统费用。

按照实际的数据传送技术，交换技术分为：

电路交换：在数据传送之前必须先设置一条通路。线路释放前，该通路将由一对用户独占。适合较轻和间歇式负载

报文交换：报文从源点传送到目的地采用存储转发的方式，在传送报文时，同时只占用一段通道。在交换节点中需要缓冲存储，报文需要排队。因此报文交换不能满足实时通信的要求

分组交换：交换方式和报文交换方式类似，但报文被分成分组传送，并规定了最大的分组长度。适合交换中等书籍到大量数据

### 3.路由技术

路由器是工作在网络层的重要网络互连设备，工作在Internet上的路由器也称为IP网关。路由器主要功能是进行路由选择。

根据路由选择协议的应用范围，可分为：

**内部网关协议**：是指在一个自治系统（AS）内运行的路由选择协议

**外部网关协议**：是指在两个同构成的AS之间使用的路由选择协议。主要功能是控制路由策略

**核心网关协议**：Internet中有个主干网，所有的AS都连接到主干网上，主干网中的网关就是核心网关

从路由协议使用的算法来看，分为：

**距离向量协议**：计算网络中所有链路的矢量和距离，并以此为依据确定最佳路径。会定期向相邻的路由器发送全部或部分路由表

**链路状态协议**：使用为每个路由器创建的拓扑数据库来创建路由表，通过计算最短路径来形成路由表。会定期向相邻路由器发送网络链路状态信息

**平衡性协议**：结合了距离向量协议和链路状态协议的优点

## 4.4 网络工程

按照实施过程的先后，网络工程可分为网络规划、网络设计和网络实施三个阶段

### 4.4.1网络规划

应该以需求为基础，同时考虑技术和工程的可行性，包括网络需求分析、可行性分析和对现有网络的分析与描述

#### 网络需求分析

**功能需求**：指用户希望利用网络来完成什么功能，然后依据使用需求、实现成本、未来发展和总预算投资等因素对网络的组建方案进行认真的设计和推敲

**通信需求**：指了解用户需要的通信类型、通信频度、通信时间和通信量等

**性能需求**：包括容量（带宽）、利用率、最优利用率、吞吐量、可提供负载、精确度、效率、延迟、延时变化量、响应时间、最优网络利用率、端到端的差错率、精确度和网络效率等。

**可靠性需求**：主要包括精确度、错误率、稳定性、无故障时间、数据备份等几个方面

**安全需求**：衡量网络安全的指标是可用性、完整性和保密性

**运行和维护需求**：指网络运行和维护费用方面的需求

**管理需求**：主要包括用户管理、资源管理、配置管理、性能管理和网络维护

#### 可行性分析

通常从技术可行性、经济可行性、法律可行性和用户使用可行性等方面进行论证。

#### 对现有网络的分析和描述

对现有网络系统进行调研，主要从一下几个方面：

1.服务器的数据量和位置；是确定网络瓶颈、解决网络拥塞的前提。

2.客户机的数量和位置。用于设计该区域及周边区域的网络结构，均衡网络负载。

3.同时访问的数量。了解网络并发访问情况，考验网络负载能力

4.每天的用户数。反应网络的负载和流量

5.每次的使用时间。对并发的流量预计有很大影响

6.每次数据传输的数据量

7.网络拥塞的时间段

8.采用的协议

9.通信模式

结合现有的网络系统的调研与分析，并在其基础上进行新的网络规划，从以下措施更有效地保证用户的原始投资：

1.不要推倒重来，要基于现有设备的基础上进行升级和改造

2.将现有的设备降级使用，并新增更先进的设备，以提高网络的性能

### 4.4.2 网络设计

首先要确定