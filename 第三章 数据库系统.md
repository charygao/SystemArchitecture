## 3.1数据库管理系统的类型

当前，许多商业DBMS中所用的主要数据模型仍是关系数据模型。按数据模型划分，包括关系型、文档型、键值型、对象型。

## 3.2数据库模式与范式

<img src="/Users/apple/Documents/GitHub/SystemArchitecture/pic/数据库系统结构层次.png" alt="数据库系统结构层次" style="zoom:50%;" />

### 3.2.1数据库的结构与模式

#### 1.三级抽象

数据库系统划分为三个抽象级：用户级、概念级、物理级

**用户级数据库**：又称用户视图。用户级数据库对应于外模式，是最接近用户的一级数据库，是用户可以看到和使用的数据库。主要由外部记录组成，不同的用户视图可以互相重叠，用户的所有操作都是针对用户视图进行的。

**概念级数据库**：又称DBA（DataBase Administrator，数据库管理员）视图，介于用户级和物理级之间，是所有用户视图的最小并集，是数据库管理员可看到和使用的数据库。

**物理级数据库**：又称内部视图。对应于内模式，是数据库的低层表示，它描述数据的实际存储组织，是最接近于物理存储的级。由内部记录组成，并不是真正的物理存储，而是最接近于物理存储的级。

#### 2.三级模式

数据库系统的三级模式为外模式、概念模式、内模式

**概念模式（模式、逻辑模式）**：用以描述真个数据库中数据库的逻辑结构，描述现实世界中的尸体及其性质于联系，定义记录、数据项、数据的完整性约束条件及记录之间的联系，是数据项值的框架。

**外模式（子模式、用户模式）**：用以描述用户看见或使用的那部分数据的逻辑结构，用户根据外模式用数据操作语句或应用程序去操作数据库中的数据。描述组成用户视图的各个记录的组成、相互关系、数据项的特征、数据的安全性和完整性约束条件。

一个数据库可以有多个外模式。一个应用程序只能使用一个外模式。

**内模式**：是整个数据库的最底层表示。定义的是存储记录的类型、存储域的表示以及存储记录的物理顺序，指引元、索引和存储路径等数据的存储组织。一个数据库只有一个内模式

关系：1.概念模式是数据库的中心与关键；2.内模式依赖于概念模式，独立于外模式和存储设备；3.外模式面向具体的应用，独立于内模式和存储设备；4.应用程序依赖于外模式独立于概念模式和内模式

#### 3.两级独立性

指物理独立性和逻辑独立性。三个抽象级间通过两级映射（外模式-模式映射，模式-内模式映射）进行相互转换，使得数据库的三级形成一个统一的整体

**物理独立性**：是指用户的应用程序与存储在磁盘上的数据库中的数据是相互独立的。当数据的物理存储改变时，应用程序不需要改变。存在于概念模式和内模式之间的映射转换，说明物理组织发生变化时应用程序的独立程度

**逻辑独立性**：是指用户的应用程序与数据库中的逻辑结构是相互独立的。当数据的逻辑结构改变时，应用程序不需要改变。存在于外模式和概念模式之间的映射转换，说明概念模式发生变化时应用程序的独立程度。

### 3.2.2数据模型

分别是概念数据模型（实体-联系模型）和基本数据模型（结构数据模型）

**概念数据模型**（E-R模型）：按照用户的观点来对数据和信息建模，主要用于数据库设计。主要用实体-联系方法表示。

**基本数据模型**：按照计算机系统的观点来对数据和信息建模，主要用于DBMS的实现。是数据库系统的核心和基础。通常由数据结构、数据操作和完整性约束三部分组成。数据结构是对系统静态特性的描述，数据操作是对系统动态特性的描述，完整性约束是一组完整性规则的集合

常用基本数据模型：层次模型、网状模型、关系模型、面向对象模型

**层次模型**：用树形结构表示实体类型及实体间的联系。优点是记录之间的联系通过指针来实现，查询效率较高。缺点是只能表示1:n联系，虽可通过辅助手段实现m：n，但比较复杂，不易掌握。由于层次顺序的严格和复杂，导致数据的查询和更新操作很复杂，应用程序的辨析也比较复杂。

**网状模型**：用有向图表示实体类型及实体间的联系。优点是记录之间的联系通过指针实现，m：n联系容易实现，查询效率高。缺点是编写应用程序的过程比较复杂，程序员必须熟悉数据库的逻辑结构。

**关系模型**：用表格结构表达实体集，用外键表达实体间的联系。优点：建立在严格的数学概念基础上；概念（关系）单一，结构简单、清晰，用户易懂易用；存取路径对用户透明，从而数据独立性、安全性好，简化数据库开发工作

### 3.2.2 关系代数

基本运算有：并、交、差、笛卡尔积、选择、投影、连接和除法运算。

#### 1.并

R∪S 的元组包括 R 和 S 所有元组的集合

#### 2.差

R-S 的元组包括 R 中有而 S 中没有的元组的集合

#### 3.交

R∩S 的元组包括 R 和 S 相同元组的集合

#### 4.笛卡尔积

R×S 是 m+n 元的元组的集合

列数量相加起来，元组数量相乘

#### 5.投影

从一个关系中抽泣知名的属性（列）

p12（R）为从关系R中抽取第一列和第二列

#### 6.选择

$$
\sigma_F(R)\equiv\{t|t\in R\wedge F(t)=true\}
$$

F为选择条件，是一个逻辑表达式。选择满足条件的元组

#### 7.连接

是从两个关系的笛卡尔积中选取属性之间满足一定条件的元组

通过指定属性组，为等值连接

通过比较相同的属性组，并将重复的属性去掉，为自然连接

#### 8.除

